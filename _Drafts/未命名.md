在社交网络发达的互联网时代，人与人间的信息传递普遍通过这个庞大的社交网络来传递，那么对于博弈论经典的拍卖问题，也同样会受到社交网络的影响。传统的拍卖场景假设所有的参与者都是相互独立的，但在现实中，区别于传统的拍卖场景，参与者之间可能会存在一定的社会关系。

由此，我们引出接下来的假设：社交网络中的每个节点只能与其邻居节点直接通信。因此如果某个节点需要拍卖一件商品，在不借助任何第三方推广的情况下，他只能邀请其邻居参与。卖家为使得拍卖的价格更高，会对拍卖的消息进行推广以邀请到更多的节点参与到这场拍卖中来；与此同时，买家则希望拍卖物品的价格更低，他们就会倾向于阻止拍卖信息的传递，从而阻止更多的买家参与到对此商品的竞争中来。双方行为这样的矛盾就构成了一个博弈的状态。Li et al首先研究了这个问题，其在2017年提出了一个中心化的解决方案。2018年，Zhao et al又对这个问题在多物品拍卖的维度上进行了扩展。

Li et al的机制会去鼓励那些已经参与了拍卖的买家去邀请他们在社交网络上的邻居来参与进拍卖。如果他们的传播是使得卖家获利的关键一环，那么他们就会获得卖家按照为此次拍卖作出贡献大小所算出的奖励。然而，Li et al的机制是中心化的机制，因此其存在着许多潜在的应用问题。第一，当卖家使用该机制进行拍卖时，他可以获得整个网络的拓扑结构信息，换句话说，卖家可以获得所有买家的私人信息，包括他们的估价和社交关系，这将直接导致买家的隐私信息遭到泄露。第二，既然卖家知道整个网络结构，那么他就可以忽略节点的传播贡献直接与最高报价买家交易。

为解决Li et al机制中的不足，本文希望能够提出一个分布式解决方案，它要求网络中的所有买家一起执行该分布式机制以完成最终的物品交易和收益分配。这也就意味着在该网络中，包括卖家和一些新引入的中立节点在内的所有节点，都不会拥有完整的网络结构信息。

### 模型描述

考虑由$n$个网络节点组成的社交网络，记为$N=\{1,2,3,...,n\}$，每个节点$i\in N$都有一个唯一的标号和一组邻居，记为$r_i\subseteq N\setminus\{i\}$。此网络中的每个节点仅可与其邻居通信。此外，网络中的每个节点都是自私的，即他们都是以最大化自己的收益为最终目标的。网络里面有一个seller希望将一个不可分割的商品出售给这个社交网络中的其他人。同时，每个买家节点$i$对此商品都有一个私有的估价$v_i$，但是一开始只有卖家的邻居知道有这次拍卖。我们令$\theta_i=(v_i,r_i)$来表示买家$i$的私有type，令$\Theta_i$表示买家$i$的type空间。一个买家的type包括对待拍卖物品的心理估值，以及他的社交信息（即他自己的邻居）。令集合$\theta=\{\theta_1,\theta_2,...,\theta_n\}$表示为所有买家的type的一个profile，则$\Theta=\Theta_1\times\Theta_2\times...\times\Theta_n$为所有可能type描述的空间。

接下来定义分布式机制的一些重要概念和性质。

**定义1** 买家$i\in N$的内部状态定义为$c_i=(\gamma_1,\gamma_2,...,\gamma_m)$，其中$\gamma_j,j\in[i,...,m]$是状态变量，其可以为任何类型的信息。令$C_i$为$i$的内部状态空间。状态可以被分解成两个部分，即$c_i=(t_i,a_i)$，其中$t_i$是私有信息类要向其他节点汇报的状态变量的集合，而$a_i$则是买家自身用于计算奖励等计算状态变量的集合。

再设$s_i:\Theta_i\to C_i$是买家$i$的策略，$\Sigma_i$为$i$的策略空间。特别地，当$i$没有收到拍卖信息或$i$不想参与拍卖时，$s_i(\theta_i)=$null。设$\Sigma=\Sigma_1\times\Sigma_2\times...\times\Sigma_n$表示所有买家的联合策略空间，而$s=(s_i\in\Sigma_i)_{i\in N}$则是所有买家的一个策略描述。特别地，将一个诚实的私有信息汇报策略记为$s_i^{tr}(\theta_i)=(t_i^*,a_i)$，一个诚实的计算策略记为$s_i^{tp}(\theta_i)=(t_i,a_i^*)$，机制所建议的策略为$s_i^*(\theta_i)=(t_i^*,a_i^*)$，表示此策略既诚实地汇报了私有信息，又诚实地按照机制进行了计算。

**定义2** 社交网络中的分布式机制$d^{M}$是一个二元组$(\pi,p)$，其中$\pi=(\pi_i)_{i\in N}$是分配函数，$p=(p_i)_{i\in N}$则是所有买家的支付函数。特别地，$\pi_i:\Sigma\to\{0,1\}$与$p_i:\Sigma\to R$分别是买家$i$的分配和支付函数。

具体地说，$\pi_i(s)=1$表示买家$i$得到物品，$\pi_i(s)=0$则表示没有得到物品。类似地，$p_i(s)\geq0$表示买家$i$支付$p_i(s)$，而$p_i(s)<0$则表示买家$i$得到$-p_i(s)$的奖励。为方便起见，令$\theta_{-i}=(\theta_j)_{j\neq i,j\in N}$且$s_{-i}=(s_j)_{j\neq i,j\in N}$。给定一个私有信息类描述$\Theta$，策略描述$s$和机制$(\pi,p)$，则买家$i$的收益定义为：
$$u_i(\theta_i,s(\theta),(\pi,p))=\pi_i(s)\times v_i-p_i(s)$$

\textbf{定义3} 中心化机制$M=(f,q)$是激励相容的，当且仅当对所有的$\theta_i$，所有的$\theta_i'\neq\theta_i$以及所有的$\theta_{-i}'$，都有：
$$u_i(\theta_i,(\theta_i,\theta_{-i}'),(f,q))\geq u_i(\theta_i,(\theta_i',\theta_{-i}),(f,q))$$
其中，$f:\Theta\to\{0,1\}$是分配函数，$q:\Theta\to R$是支付函数，$\Theta$是所有可能私有信息类描述的空间。

\textbf{定义4} 一个分布式机制$d^{M}$的建议策略描述是一个后验纳什均衡，当且仅当：
$$u_i(\theta_i,(s_i^*,s_{-i}^*),(\pi,p))\geq u_i(\theta_i,(s_i,s_{-i}^*),(\pi,p))$$
对于所有的$i\in N$，所有的$s_i\neq s_i^*$以及所有的$\theta_i\in\Theta_i$与$\theta_{-i}\in\theta_{-i}$均成立。

接下来定义算法相容（Algorithm Compatible，AC）的概念。算法相容性质表示对于任何买家$i$，如果所有其他买家执行建议策略$s_{-i}^*$，则无论$i$报告什么私有信息，$i$都不能够通过违背计算协议来获得更高的收益。

\textbf{定义5} 对于任意的买家$i\in N$，分布式机制$d^{M}$是算法相容的，当且仅当：
$$u_i(\theta_i,((t_i,a_i^*),s_{-i}^*),(\pi,p))\geq u_i(\theta_i,((t_i,a_i),s_{-i}^*),(\pi,p))$$
对所有的$\theta_i,t_i\neq t_i^*$以及所有的$a_i$都成立。

更加直观地说，算法相容性鼓励那些更改买家诚实地执行预期的算法。即对于任何买家$i$，如果定他的策略总是$s_i^{tp}(\theta_i)=(t_i,a_i^*)$，那么总可以找到中心化的机制$M$，使得$\pi(s^{tp})=f(\theta')$与$p(s^{tp})=q(\theta')$对所有的私有信息类描述$\theta'\in \Theta$都成立。其中$\pi,f$分别是$d^{M},M$的分配函数，$p,q$分别是$d^{M},M$的支付函数。此时称这个中心化机制$M$为$d^{M}$的中心化规约机制(Centralized Reduction Mechanism，CRM)。

**定理1** 给定一个算法相容（AC）的分布式机制$d^{M}$，如果$d^{M}$的CRM（记作$M$）是激励相容（IC）的，那么$d^{M}$一个建议的策略描述$s^*$是一个后验纳什均衡。

**Proof** 由$M$是$d^{M}$的CRM可得：
$$u_i^{M}(\theta_i,\theta',(f,q))=u_i^{d^{M}}(\theta_i,s(\theta),(\pi,p))$$
又由于$M$是IC的，则有：
$$u_i^{d^{M}}(\theta_i,((t_i^*,a_i^*),s_{-i}^*),(\pi,p))\geq u_i^{d^{M}}(\theta_i,((t_i,a_i^*),s_{-i}^*),(\pi,p))$$
由定义5易得，$s^*$是一个后验纳什均衡。QED。

由定理1可知，如果能够找到一种方法来监督分布式网络中的计算过程，就可以在该网络上分布式地运行任何激励相容的中心化机制，同时确保该分布式机制将获得与中心化机制相同的结果。

### 分布式的信息传播机制
Li et al提出的一种通过社交网络销售商品的中心化机制，称为信息扩散机制（Information Dif⁃ fusion Mechanism，IDM），并证明该机制是激励相容（IC）的 . 与此同时，该机制保证卖家的收入与无需任何信息传播相比所能获得的收入总数不减少，因此卖家可以在任何社交网络下使用该机制而不会比使用不传播的机制更差 . 该机制要求所有买家向卖家或其他第三方平台报告其估值，并且卖家或者第三方平台必须知道网络的整体结构以计算分配和支付 . 

以下为该机制的简要描述：

步骤1：给定一个可行的私有信息类描述报告$\theta$，找到具有最高估值报告（如果有相同的就随机挑选）的买家，用$w$表示。

步骤2：找到$w$的关键节点序列，用$CR_{w}$表示。我们定义$j\in CR_{w}$，当且仅当如果没有$j$的私有信息汇报$\theta_j$，就无法找到从卖家到$w$的一条邀请链。

步骤3：令$d_i$为以节点$i$为关键节点的节点集合与$\{i\}$的并集，$-d_i$则等于$N\setminus d_i$，其中$N$为所有买家的集合。

步骤4：对于任意两个买家$i,j\in CR_{w}$，定义一个排序关系$\succ_{w}$，有$i\succ_{w}j$当且仅当从卖家到$j$的所有邀请链都包含$i$，即$i\in CR_{w}$。

步骤5：我们令$v_{S}^*=\max_{j\in S}v_j$，则对于每个$i\in CR_{w}$，设其在$CR_{w}$上的下一个关键节点为$j$，用$p_i$表示$i$的支付，有
$$
p_i(\theta)=
\left\{\begin{aligned}
&v_{-d_i}^*-v_{-d_j}^*\quad&i\in CR_{w}\setminus\{w\}\\
&v_{-d_i}^*\quad&i=w\\
&0\quad&otherwise.
\end{aligned}\right.
$$

步骤6：卖家将物品交给根据$\succ_{w}$关系排在$CR_{w}$第一位的买家$i$，$i$需要支付$v_{-d_i}^*$。令$j$为$CR_{w}$链上的下一位买家，则重复以下过程直到该物品被分配。(1)如果$i$是$CR_{w}$中的最后一位买家或$v_i=v_{-d_j}^*$，则$i$直接赢得该物品。(2)否则的话，$i$将物品传递给买家$j$，$j$向$i$支付$v_{-d_j}^*$，然后令$i=j$，再令$j$为$CR_{w}$链上的下一位买家。

对该机制的简要描述如下：IDM 通过第三方平台找到具有最高估值的买家，并确定到达该买家的关键节点买家。此时，关键节点买家以外的其他买家其实已经无缘这场拍卖了，因为分配只发生在那些关键节点买家之间 . 卖家将通过关键节点链来将物品传递给出价最高的买家，而关键节点链上的买家都将得到一个非负奖励，这个奖励使买家会倾向于去传播拍卖信息。

我们可以简单地证明除最终买家$w$外，其它买家都会得到一个非负的奖励，即证明：
$$\forall i\in N\setminus\{w\},\theta\in\Theta:p_i(\theta)\geq0$$
Proof：首先若$i$不是关键节点，则有$p_i(\theta)=0$，成立。若$i$为关键节点，我们只需证明$v_{-d_i}^*\leq v_{-d_j}^*$，其中$j$为$i$在关键节点链$CR_{w}$上的下一个节点。
$$
\begin{aligned}
&v_{-d_i}^*\leq v_{-d_j}^*\Longleftrightarrow \max_{k\in-d_i}v_k\leq\max_{k\in-d_j}v_k
\end{aligned}
$$
对于$\forall k\in d_j$，从卖家到达$k$都需要经过$j$，而由于$i$是$j$的关键节点，因此从卖家到达$j$一定要经过$i$，则从卖家到达$k$也需要经过$i$，因此有
$$d_j\subseteq d_i\implies N\setminus d_i\subseteq N\setminus d_j$$
即$-d_i\subseteq-d_j$，因此有
$$\max_{k\in-d_i}v_k\leq\max_{k\in-d_j}v_k$$
QED.

 ---
与此同时，此机制还能够保证卖家的收入至少与不进行传播时一样，我们可以进行简单地证明：

Proof：若$w\in r_{s}$，易知不传播与传播的卖家收益都是$v_{w}$，二者相等。但当$w\notin r_{s}$时，若不进行传播，卖家的收益为$v_{r_{s}}^*$，即卖家邻居节点中的出价最高者；而按照IDM进行传播之后，卖家的收益为$v_{-d_i}^*$，其中$i$为第一个关键节点。因此我们需要证明：
$$v_{r_{s}}^*\leq v_{-d_i}^*\Longleftrightarrow \max_{k\in r_{s}}v_k\leq\max_{k\in-d_i}v_k$$
当$i\in r_{s}$时，
与上一个证明类似，我们只需证明：
$$
\begin{aligned}
r_{s}\subseteq-d_i&\Longleftrightarrow r_{s}\subseteq N\setminus d_i\\
&\Longleftrightarrow r_{s}\subseteq N\wedge r_{s}\cap d_i=\varnothing
\end{aligned}
$$
---




本文介绍的分布式信息扩散机制（Distributed Information Diffusion Mechanism，DIDM）便可用于克服IDM 的两个缺点 . 注意，假设网络中还存在一个名为 Bank 的中立的受信任节点，同样，Bank 将无法获得有关此网络的所有信息，他的职责是检查买家报告的信息的正确性并监督交易过程 . 特别的，所有买家都通过私有的稳定的信道与 Bank 连接，但是 Bank 对社交网络的拓扑结构没有任何了解 . 如果在拍卖阶段 Bank 发现有买家没有诚实计算，Bank 可以对所有买家施加一个巨大的惩罚并停止拍卖。

IDM 中的关键目标是找出网络的关键节点序列并计算关键节点的支付 . 首先介绍分布式算法来找出关键节点序列 . 如果使用深度优先搜索（Depth First Search，DFS）算法遍历一个无向图，当同时令所有买家记录首次邀请他们参与拍卖的邻居作为其父节点时，就可以得到一棵生成树，此生成树经常被称为 DFS 树。

基于这个生成树，原始图的边可以分为两类：树边，即属于 DFS 树的边；回边，即连接某个买家和他的某个祖先买家的边 . 在 DFS 树中，分别定义$P(i)$为买家$i$的父买家和$C(i)$为子买家的集合。例如在图1中，$P(c)=\{a\},C(c)=\{d\}$和$C(s)=\{a,b\}$。还可以定义$T(i)$为生成树中以$i$为根的一棵子树。

此外，对于任何买家$i$，定义$dt_i$是买家$i$首次被邀请的时间，并令$et_i=\min_{j\in r_i\setminus\{p(i)\}}\{dt_i,et_j\}$。直观地说，$et_j$是$i$经过非父邻居的所有路径中可以到达最早被邀请的祖先的加入时间。