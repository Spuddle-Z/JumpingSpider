---
tags:
  - Knowledge
---
## 需求分析
难点主要在用户缺少计算机知识，设计人员则缺少用户的专业知识，解决方法只能是不断地深入交流。

一般采用**结构化分析方法(Structured Analysis, SA)**来分析与表达用户需求：
- 从最上层的系统组织机构入手
- 自顶向下，逐层分解
- 最后用*数据流图*与*数据字典*描述系统
> [!example] 
> 某工厂开发管理信息系统，确定由物质管理、销售管理、劳动人事管理等子系统组成，为每个子系统组成了开发小组。其中销售管理子系统的的主要功能有：
> - 处理顾客和销售员送来的订单；
> - 工厂是根据订货安排生产的；
> - 交出货物同时开出发票；
> - 收到顾客付款后，根据发票存根和信贷情况进行应收款处理。
> 
> 根据以上需求，画出第一层的数据流图，虚线部分是系统的边界：
> ![[Pasted image 20240328161358.png]]
> 一般不希望系统太复杂，所以会细分成更小的数据流图，如下是送进订单的第二层数据流图：
> ![[Pasted image 20240328161609.png|450]]
> 处理订单的第二层数据流图：
> ![[Pasted image 20240328163046.png|500]]
> 开发票的第二层数据流图：
> ![[Pasted image 20240328163131.png|400]]
> 支付过账的第二层数据流图：
> ![[Pasted image 20240328163304.png|400]]
> 

- **数据字典**：是关于数据库中数据的描述，是元数据，而不是数据本身。其包括*数据项*、*数据结构*、*数据流*、*数据存储*、*处理过程*。
- **数据项**：是最小的、不可再分的数据单位。
	> [!example] 
	> 一个典型的数据项如下：以“学号”为例
	> - 数据项：学号
	> - 含义说明：唯一标识每个学生
	> - 别名：学生编号
	> - 类型：字符型
	> - 长度：8
	> - 取值范围：00000000至99999999
	> - 取值含义：前两位表示该学生所在年级，后六位按顺序编号
- **数据结构**：反映了数据之间的组合关系，可以由若干个数据项与数据结构组成。
	> [!example] 
	> 以“学生”的为例：
	> - 数据结构：学生；
	> - 含义说明：是学籍管理子系统的主体数据结构，定义了一个学生的有关信息；
	> - 组成：学号，姓名，性别，年龄，所在系，年级。
- **数据流**：是数据结构在系统内传输的路径。
	> [!example] 
	> 数据流“体检结果”可如下描述：
	> - 数据流：体检结果
	> - 说明：学生参加体格检查的最终结果
	> - 数据流来源：体检
	> - 数据流去向：批准
	> - 组成：……
	> - 平均流量：……
	> - 高峰期流量：……
- **数据存储**：是数据结构停留或保存的地方，也是数据流的来源或去向。
	> [!example] 
	> 数据存储“学生登记表”可如下描述：
	> - 数据存储：学生登记表
	> - 说明：记录学生的基本情况
	> - 输入数据流：……
	> - 输出数据流：……
	> - 组成：……
	> - 数据量：每年3000张
	> - 存取方式：随机存取
- **处理过程**：处理过程的具体处理逻辑一般用判定表或判定树来描述，数据字典中只需要描述处理过程的说明性信息。
	> [!example] 
	> 处理过程“分配宿舍”可如下描述：
	> - 处理过程：分配宿舍
	> - 说明：为所有新生分配学生宿舍
	> - 输入：学生，宿舍
	> - 输出：宿舍安排
	> - 处理：在新生报到后，为所有新生分配学生宿舍。要求同一间宿舍只能安排同一性别的学生。同一个学生只能安排在一个宿舍中。每个学生的居住面积不小于3平方米。安排新生宿舍其处理时间应不超过15分钟。

## 概念结构设计
### 大致流程
**概念结构设计**：将需求分析得到的用户需求抽象为信息结构。*E-R模型*是描述概念模型的工具。概念结构设计的常用策略如下图所示：
![[Pasted image 20240328201131.png|500]]
1. 先在多层的数据流图中选择一个适当层次的数据流图；
2. 将此层次各局部应用涉及的数据从数据字典里抽取出来，据此设计E-R图；
	> [!note] 实体与属性的划分原则
	> 为简化E-R图，现实世界中的事物凡是能作为属性对待的，应尽量作为属性；但属性不能再具有需要别的性质，且属性也不能再和其他实体之间产生联系，若不满足这两条，则只能当作实体来处理。
1. 完成各个局部的E-R图之后，需要将这些E-R图集成成为一个更大的E-R图。

在合并E-R图的过程中，可能会出现三类冲突：
1. **属性冲突**
	- 属性域冲突：属性值的*类型*、*取值范围*与*取值集合*不同；
	- 属性取值单位冲突。
1. **命名冲突**
	- 同名异义：不同意义的对象在不同的E-R图中起了相同的名字；
	- 异名同义：同一意义的对象在不同的E-R图中起了不同的名字。
2. **结构冲突**
	- 同一对象在不同应用中具有不同的抽象；
	- 同一实体在不同分E-R图中所包含的属性个数和属性排列次序不完全相同；
	- 实体之间的联系在不同局部视图中呈现不同的类型。

> [!caution] 属性冲突与结构冲突的区别
> 两种冲突都和属性有关，容易混淆。
> - 属性冲突是指属性域、属性单位这种属性本身的冲突；
> - 结构冲突则是会在E-R图中体现的属性外部的冲突。
### 修改与重构
> [!definition] 冗余
> *冗余的数据*是指可由基本数据导出的数据，*冗余的联系*是指可由其他联系导出的联系。冗余容易破坏数据库的完整性，不易于维护。

> [!note] 
对于一些常用的冗余数据，也是需要保留的，消除后反而会降低效率。

消除冗余的方法：
- 通过数据项之间的逻辑关系来推导出冗余，进而消除冗余。
	> [!example] 
	> 图中通过*产品消耗零件量*与*零件使用材料量*就可以推出*产品消耗的材料量*，那么产品与材料之间的这个关系就属于冗余的关系。
	> ![[Pasted image 20240328204047.png|500]]
- 可以通过*规范化理论*来消除冗余：
	1. 确定实体之间的数据依赖$F_{L}$；
	2. 求$F_{L}$的[[关系规范化基础#最小依赖集|最小覆盖]]$G_{L}$，再求二者差集$D=F_{L}-G_{L}$；
	3. 逐一考察$D$中的函数依赖，确定是否是冗余的联系。
		> [!note] 
		> 冗余的联系一定在$D$中，而$D$中的联系不一定是冗余的。
## 逻辑结构设计
每个*实体*、*多对多的联系*与*三个及以上实体间的多元联系*都要转换成一个关系模式，一对多的关系则可以选择向多的那一端合并，一对一的关系可向任意一端合并（合并即指成为另一端实体的属性）。
> [!caution] 
> 关系模式中要用*下划线标出主码*并*用下波浪线标出外码*。

数据模型的优化方法：
1. **依据规范化理论进行优化**：即确定每个关系模式所属范式，要根据实际情况确定规范化程度，有时甚至要降低规范化程度。
2. **对关系模式进行分解**：两种分解方法的原则都是*提高效率*
	- **水平分解**：按照元组分为若干子集合，以提高系统效率。一些应用满足*80/20原则*，即只有20%的数据会经常被使用，对于这些数据适合使用水平分解。
	- **垂直分解**：与水平分解相对应，按照属性分解为若干子集合。

还可以从用户的角度来*设计外模式*，即定义不同的视图，只展示部分数据，来在满足特定任务的需求前提下提高效率。
## 物理结构设计
> [!definition] 数据库的物理结构
> 指数据库在物理设备上的*存储结构*与*存取方法*，由数据库管理系统决定。

数据库的存取方法有索引方法（包括B+树索引与哈希索引）和聚簇方法。其主要思想为通过按照一定结构保存数据，来加速常用的搜索，但同时会牺牲不常用搜索的效率。
> [!definition] 聚簇 (Cluster)
> 为了提高某一属性的搜索效率，将这个*属性值相同*的元组保存在*连续*的物理空间上，这个属性被称作**聚簇码**。

确定数据存放位置的基本原则：将数据按照存取频率较高的*易变部分*与存取频率较低的*稳定部分*来分开存放。
